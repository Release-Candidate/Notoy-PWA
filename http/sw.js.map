{
  "version": 3,
  "sources": ["http/sw.js"],
  "sourcesContent": ["// SPDX-License-Identifier: GPL-3.0-or-later\n// Copyright (C) 2021 Roland Csaszar\n//\n// Project:  notoy-pwa\n// File:     sw.js\n// Date:     02.Dec.2021\n//\n// ==============================================================================\n/* eslint-disable function-paren-newline */\n/* eslint-disable implicit-arrow-linebreak */\n\n// `version` is the name of the cache, including a timestamp.\n// This is filled by `gulp bundle` when copying `sw.js` to the directory `http`.\n// eslint-disable-next-line no-undef\nconst version = \"Notoy-PWA-20220218165358\"\n// `manifest` is an array holding the paths to all files to cache.\n// This is changed against the real list of files by `gulp bundle` when copying\n//`sw.js` to the directory `http`.\n// eslint-disable-next-line no-undef\nconst manifest = [\n\"/Notoy-PWA/http/404.html\",\"/Notoy-PWA/http/app.js\",\"/Notoy-PWA/http/app.js.map\",\"/Notoy-PWA/http/apple-touch-icon.png\",\"/Notoy-PWA/http/browserconfig.xml\",\"/Notoy-PWA/http/favicon.ico\",\"/Notoy-PWA/http/favicon.svg\",\"/Notoy-PWA/http/icons/download.svg\",\"/Notoy-PWA/http/icons/icon.svg\",\"/Notoy-PWA/http/icons/maskable_128.png\",\"/Notoy-PWA/http/icons/maskable_144.png\",\"/Notoy-PWA/http/icons/maskable_16.png\",\"/Notoy-PWA/http/icons/maskable_192.png\",\"/Notoy-PWA/http/icons/maskable_256.png\",\"/Notoy-PWA/http/icons/maskable_32.png\",\"/Notoy-PWA/http/icons/maskable_48.png\",\"/Notoy-PWA/http/icons/maskable_512.png\",\"/Notoy-PWA/http/icons/maskable_72.png\",\"/Notoy-PWA/http/icons/maskable_96.png\",\"/Notoy-PWA/http/icons/position.svg\",\"/Notoy-PWA/http/icons/share.svg\",\"/Notoy-PWA/http/icons/transparent_128.png\",\"/Notoy-PWA/http/icons/transparent_144.png\",\"/Notoy-PWA/http/icons/transparent_16.png\",\"/Notoy-PWA/http/icons/transparent_192.png\",\"/Notoy-PWA/http/icons/transparent_256.png\",\"/Notoy-PWA/http/icons/transparent_32.png\",\"/Notoy-PWA/http/icons/transparent_48.png\",\"/Notoy-PWA/http/icons/transparent_512.png\",\"/Notoy-PWA/http/icons/transparent_72.png\",\"/Notoy-PWA/http/icons/transparent_96.png\",\"/Notoy-PWA/http/index.html\",\"/Notoy-PWA/http/manifest.json\",\"/Notoy-PWA/http/mstile-150x150.png\",\"/Notoy-PWA/http/notoy-pwa.css\",\"/Notoy-PWA/http/safari-pinned-tab.svg\",\"/Notoy-PWA/http/sw.js\",\"/Notoy-PWA/http/sw.js.map\",\"/Notoy-PWA/http/\"\n]\n\n//==============================================================================\n// Installation\n\n/**\n * Install the service worker.\n * On installation, all files Parcel knows about are added to the cache.\n */\nasync function install() {\n    const cache = await caches.open(version)\n    await cache.addAll(manifest)\n    // eslint-disable-next-line no-console\n    console.log(`[Service Worker] installed files to ${version}`)\n}\n\naddEventListener(\"install\", (event) => {\n    event.waitUntil(install())\n})\n\n//==============================================================================\n// Activation\n\n/**\n * Activate service worker.\n * On activation all files from older versions of the cache are deleted.\n */\nasync function activate() {\n    const keys = await caches.keys()\n    await Promise.all(keys.map((key) => key !== version && caches.delete(key)))\n    // eslint-disable-next-line no-console\n    console.log(`[Service Worker] activated`)\n}\n\naddEventListener(\"activate\", (event) => event.waitUntil(activate()))\n\n//==============================================================================\n// Fetching\n\n/**\n * Fetches the given URL, either from cache or the server.\n *\n * @param {RequestInfo} request The request to fulfill.\n *\n * @returns {Response} The fetched URL as `Response`.\n */\nasync function fetchFromCache(request) {\n    const cachedResponse = await caches.match(request, { ignoreSearch: true })\n    if (cachedResponse) {\n        // eslint-disable-next-line no-console\n        console.log(`[Service Worker] cache hit: ${request.url}`)\n        return cachedResponse\n    }\n    // eslint-disable-next-line no-console\n    console.log(`[Service Worker] fetching ${request.url}`)\n\n    const response = await fetch(request).catch(return404)\n    if (response.ok) {\n        return response\n    }\n    // eslint-disable-next-line no-console\n    console.log(`[Service Worker] haven't found ${request.url}`)\n    return return404(\"URL not found\")\n}\n\naddEventListener(\"fetch\", (event) =>\n    event.respondWith(fetchFromCache(event.request))\n)\n\n//==============================================================================\n// Return the 404 error page.\nasync function return404(err) {\n    // eslint-disable-next-line no-console\n    console.log(`[Service Worker] Error: \"${err}\"`)\n    return caches.match(\"/404.html\")\n}\n"],
  "mappings": "mNAcA,GAAM,GAAU,2BAKV,EAAW,CACjB,2BAA2B,yBAAyB,6BAA6B,uCAAuC,oCAAoC,8BAA8B,8BAA8B,qCAAqC,iCAAiC,yCAAyC,yCAAyC,wCAAwC,yCAAyC,yCAAyC,wCAAwC,wCAAwC,yCAAyC,wCAAwC,wCAAwC,qCAAqC,kCAAkC,4CAA4C,4CAA4C,2CAA2C,4CAA4C,4CAA4C,2CAA2C,2CAA2C,4CAA4C,2CAA2C,2CAA2C,6BAA6B,gCAAgC,qCAAqC,gCAAgC,wCAAwC,wBAAwB,4BAA4B,oBAU34C,YAAyB,gCAErB,KAAM,AADQ,MAAM,QAAO,KAAK,IACpB,OAAO,GAEnB,QAAQ,IAAI,uCAAuC,OAGvD,iBAAiB,UAAW,AAAC,GAAU,CACnC,EAAM,UAAU,OAUpB,YAA0B,gCACtB,GAAM,GAAO,KAAM,QAAO,OAC1B,KAAM,SAAQ,IAAI,EAAK,IAAI,AAAC,GAAQ,IAAQ,GAAW,OAAO,OAAO,KAErE,QAAQ,IAAI,gCAGhB,iBAAiB,WAAY,AAAC,GAAU,EAAM,UAAU,MAYxD,WAA8B,EAAS,gCACnC,GAAM,GAAiB,KAAM,QAAO,MAAM,EAAS,CAAE,aAAc,KACnE,GAAI,EAEA,eAAQ,IAAI,+BAA+B,EAAQ,OAC5C,EAGX,QAAQ,IAAI,6BAA6B,EAAQ,OAEjD,GAAM,GAAW,KAAM,OAAM,GAAS,MAAM,GAC5C,MAAI,GAAS,GACF,EAGX,SAAQ,IAAI,kCAAkC,EAAQ,OAC/C,EAAU,oBAGrB,iBAAiB,QAAS,AAAC,GACvB,EAAM,YAAY,EAAe,EAAM,WAK3C,WAAyB,EAAK,gCAE1B,eAAQ,IAAI,4BAA4B,MACjC,OAAO,MAAM",
  "names": []
}
